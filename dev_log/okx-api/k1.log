/home/jsw/.nvm/versions/node/v22.21.1/bin/node ./run/testOkxSwapDirect_k1.js
[dotenv@17.2.3] injecting env (9) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
Validating configuration...
=== Testing Larger Amount Swap ===
Contract: 0x88381a53b020ea92fb1b059e0ead49cd88be3318


=== Testing 0.01 ETH ===
Strategy A: Exclude Curve (2) and Balancer (6)
Getting swap data from OKX API...
Swap API Request Parameters: {
  "chainIndex": 1,
  "fromTokenAddress": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",
  "toTokenAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
  "amount": "10000000000000000",
  "slippagePercent": "2.0",
  "userWalletAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "swapReceiverAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "excludeDexIds": "2,6"
}
query_string ?chainIndex=1&fromTokenAddress=0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE&toTokenAddress=0xdac17f958d2ee523a2206206994597c13d831ec7&amount=10000000000000000&slippagePercent=2.0&userWalletAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&swapReceiverAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&excludeDexIds=2,6
GET /api/v6/dex/aggregator/swap Response: {
  "code": "0",
  "data": [
    {
      "routerResult": {
        "chainIndex": "1",
        "contextSlot": 24317135,
        "dexRouterList": [
          {
            "dexProtocol": {
              "dexName": "Balancer V2",
              "percent": "100"
            },
            "fromToken": {
              "decimal": "18",
              "isHoneyPot": false,
              "taxRate": "0",
              "tokenContractAddress": "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
              "tokenSymbol": "WETH",
              "tokenUnitPrice": "2864.27"
            },
            "fromTokenIndex": "0",
            "toToken": {
              "decimal": "18",
              "isHoneyPot": false,
              "taxRate": "0",
              "tokenContractAddress": "0x6b175474e89094c44da98b954eedeac495271d0f",
              "tokenSymbol": "DAI",
              "tokenUnitPrice": "0.9997"
            },
            "toTokenIndex": "1"
          },
          {
            "dexProtocol": {
              "dexName": "LitePSM",
              "percent": "100"
            },
            "fromToken": {
              "decimal": "18",
              "isHoneyPot": false,
              "taxRate": "0",
              "tokenContractAddress": "0x6b175474e89094c44da98b954eedeac495271d0f",
              "tokenSymbol": "DAI",
              "tokenUnitPrice": "0.9997"
            },
            "fromTokenIndex": "1",
            "toToken": {
              "decimal": "6",
              "isHoneyPot": false,
              "taxRate": "0",
              "tokenContractAddress": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
              "tokenSymbol": "USDC",
              "tokenUnitPrice": "0.99975"
            },
            "toTokenIndex": "2"
          },
          {
            "dexProtocol": {
              "dexName": "Maverick V2",
              "percent": "100"
            },
            "fromToken": {
              "decimal": "6",
              "isHoneyPot": false,
              "taxRate": "0",
              "tokenContractAddress": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
              "tokenSymbol": "USDC",
              "tokenUnitPrice": "0.99975"
            },
            "fromTokenIndex": "2",
            "toToken": {
              "decimal": "6",
              "isHoneyPot": false,
              "taxRate": "0",
              "tokenContractAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
              "tokenSymbol": "USDT",
              "tokenUnitPrice": "0.99872"
            },
            "toTokenIndex": "3"
          }
        ],
        "estimateGasFee": "625026",
        "fromToken": {
          "decimal": "18",
          "isHoneyPot": false,
          "taxRate": "0",
          "tokenContractAddress": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
          "tokenSymbol": "ETH",
          "tokenUnitPrice": "2864.27"
        },
        "fromTokenAmount": "10000000000000000",
        "priceImpactPercent": "0.08",
        "router": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee--0x6b175474e89094c44da98b954eedeac495271d0f--0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48--0xdac17f958d2ee523a2206206994597c13d831ec7",
        "swapMode": "exactIn",
        "toToken": {
          "decimal": "6",
          "isHoneyPot": false,
          "taxRate": "0",
          "tokenContractAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
          "tokenSymbol": "USDT",
          "tokenUnitPrice": "0.99872"
        },
        "toTokenAmount": "28701593",
        "tradeFee": "0.637914147638976496"
      },
      "tx": {
        "data": "0x0c307f76000000000000000000000000000000000000000000000000000000000003541800000000000000000000000088381a53b020ea92fb1b059e0ead49cd88be3318000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec7000000000000000000000000000000000000000000000000002386f26fc100000000000000000000000000000000000000000000000000000000000001ad3149000000000000000000000000000000000000000000000000000000006977142d0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000046000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000000010000000000000000000000004e187d91c39686099feaf2b57003bf524a2787c600000000000000000000000000000000000000000000000000000000000000010000000000000000000000004e187d91c39686099feaf2b57003bf524a2787c600000000000000000000000000000000000000000000000000000000000000018000000000000000000127100b09dea16768f0799065c475be02919503cb2a35000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000060000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0b09dea16768f0799065c475be02919503cb2a3500020000000000000000001a00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001600000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000dec408c7e44309cdcc21a6c18c965906d8def3850000000000000000000000000000000000000000000000000000000000000001000000000000000000000000dec408c7e44309cdcc21a6c18c965906d8def3850000000000000000000000000000000000000000000000000000000000000001800000000000000001022710f6e72db5454dd049d0788e411b06cfaf168530420000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000200000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4800000000000000000000000000000000000000000000000000000000000000010000000000000000000000004e3bcce28caf98a143fd8bd9e4875ccab3e7bbe000000000000000000000000000000000000000000000000000000000000000010000000000000000000000004e3bcce28caf98a143fd8bd9e4875ccab3e7bbe0000000000000000000000000000000000000000000000000000000000000000100000000000000000203271031373595f40ea48a7aab6cbcb0d377c6066e2dca000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec77777777711118000000000000000000000000000000000000000000001b5f399777777771111000000000064fa00a9ed787f3793db668bff3e6e6e7db0f92a1b",
        "from": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
        "gas": "625026",
        "gasPrice": "546574685",
        "maxPriorityFeePerGas": "500000000",
        "maxSpendAmount": "",
        "minReceiveAmount": "28127561",
        "signatureData": [
          ""
        ],
        "slippagePercent": "2",
        "to": "0x5E1f62Dac767b0491e3CE72469C217365D5B48cC",
        "value": "10000000000000000"
      }
    }
  ],
  "msg": ""
}
‚úÖ Got swap route
Router: 0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee--0x6b175474e89094c44da98b954eedeac495271d0f--0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48--0xdac17f958d2ee523a2206206994597c13d831ec7
DEX protocols used:
  1. Balancer V2 (100%)
  2. LitePSM (100%)
  3. Maverick V2 (100%)

Testing static call from contract...
‚ùå Failed: missing revert data

Strategy B: Uniswap V2 + V3 only
Getting swap data from OKX API...
Swap API Request Parameters: {
  "chainIndex": 1,
  "fromTokenAddress": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",
  "toTokenAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
  "amount": "10000000000000000",
  "slippagePercent": "2.0",
  "userWalletAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "swapReceiverAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "dexIds": "1,3"
}
query_string ?chainIndex=1&fromTokenAddress=0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE&toTokenAddress=0xdac17f958d2ee523a2206206994597c13d831ec7&amount=10000000000000000&slippagePercent=2.0&userWalletAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&swapReceiverAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&dexIds=1,3
GET /api/v6/dex/aggregator/swap Response: {
  "code": "82000",
  "data": [],
  "msg": "Insufficient liquidity"
}
Error: GET /api/v6/dex/aggregator/swap {"chainIndex":1,"fromTokenAddress":"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE","toTokenAddress":"0xdac17f958d2ee523a2206206994597c13d831ec7","amount":"10000000000000000","slippagePercent":"2.0","userWalletAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","swapReceiverAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","dexIds":"1,3"} Error: Insufficient liquidity
Failed to get swap data: GET /api/v6/dex/aggregator/swap {"chainIndex":1,"fromTokenAddress":"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE","toTokenAddress":"0xdac17f958d2ee523a2206206994597c13d831ec7","amount":"10000000000000000","slippagePercent":"2.0","userWalletAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","swapReceiverAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","dexIds":"1,3"} Error: Insufficient liquidity
‚ùå Uniswap: Insufficient liquidity

=== Testing 0.05 ETH ===
Strategy A: Exclude Curve (2) and Balancer (6)
Getting swap data from OKX API...
Swap API Request Parameters: {
  "chainIndex": 1,
  "fromTokenAddress": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",
  "toTokenAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
  "amount": "50000000000000000",
  "slippagePercent": "2.0",
  "userWalletAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "swapReceiverAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "excludeDexIds": "2,6"
}
query_string ?chainIndex=1&fromTokenAddress=0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE&toTokenAddress=0xdac17f958d2ee523a2206206994597c13d831ec7&amount=50000000000000000&slippagePercent=2.0&userWalletAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&swapReceiverAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&excludeDexIds=2,6
Error: {msg: 'Too Many Requests', code: '50011'}
Failed to get swap data: Request failed with status code 429
‚ùå Failed: Request failed with status code 429

Strategy B: Uniswap V2 + V3 only
Getting swap data from OKX API...
Swap API Request Parameters: {
  "chainIndex": 1,
  "fromTokenAddress": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",
  "toTokenAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
  "amount": "50000000000000000",
  "slippagePercent": "2.0",
  "userWalletAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "swapReceiverAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "dexIds": "1,3"
}
query_string ?chainIndex=1&fromTokenAddress=0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE&toTokenAddress=0xdac17f958d2ee523a2206206994597c13d831ec7&amount=50000000000000000&slippagePercent=2.0&userWalletAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&swapReceiverAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&dexIds=1,3
GET /api/v6/dex/aggregator/swap Response: {
  "code": "82000",
  "data": [],
  "msg": "Insufficient liquidity"
}
Error: GET /api/v6/dex/aggregator/swap {"chainIndex":1,"fromTokenAddress":"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE","toTokenAddress":"0xdac17f958d2ee523a2206206994597c13d831ec7","amount":"50000000000000000","slippagePercent":"2.0","userWalletAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","swapReceiverAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","dexIds":"1,3"} Error: Insufficient liquidity
Failed to get swap data: GET /api/v6/dex/aggregator/swap {"chainIndex":1,"fromTokenAddress":"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE","toTokenAddress":"0xdac17f958d2ee523a2206206994597c13d831ec7","amount":"50000000000000000","slippagePercent":"2.0","userWalletAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","swapReceiverAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","dexIds":"1,3"} Error: Insufficient liquidity
‚ùå Uniswap: Insufficient liquidity

=== Testing 0.1 ETH ===
Strategy A: Exclude Curve (2) and Balancer (6)
Getting swap data from OKX API...
Swap API Request Parameters: {
  "chainIndex": 1,
  "fromTokenAddress": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",
  "toTokenAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
  "amount": "100000000000000000",
  "slippagePercent": "2.0",
  "userWalletAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "swapReceiverAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "excludeDexIds": "2,6"
}
query_string ?chainIndex=1&fromTokenAddress=0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE&toTokenAddress=0xdac17f958d2ee523a2206206994597c13d831ec7&amount=100000000000000000&slippagePercent=2.0&userWalletAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&swapReceiverAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&excludeDexIds=2,6
Error: {msg: 'Too Many Requests', code: '50011'}
Failed to get swap data: Request failed with status code 429
‚ùå Failed: Request failed with status code 429

Strategy B: Uniswap V2 + V3 only
Getting swap data from OKX API...
Swap API Request Parameters: {
  "chainIndex": 1,
  "fromTokenAddress": "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",
  "toTokenAddress": "0xdac17f958d2ee523a2206206994597c13d831ec7",
  "amount": "100000000000000000",
  "slippagePercent": "2.0",
  "userWalletAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "swapReceiverAddress": "0x88381a53b020ea92fb1b059e0ead49cd88be3318",
  "dexIds": "1,3"
}
query_string ?chainIndex=1&fromTokenAddress=0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE&toTokenAddress=0xdac17f958d2ee523a2206206994597c13d831ec7&amount=100000000000000000&slippagePercent=2.0&userWalletAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&swapReceiverAddress=0x88381a53b020ea92fb1b059e0ead49cd88be3318&dexIds=1,3
GET /api/v6/dex/aggregator/swap Response: {
  "code": "82000",
  "data": [],
  "msg": "Insufficient liquidity"
}
Error: GET /api/v6/dex/aggregator/swap {"chainIndex":1,"fromTokenAddress":"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE","toTokenAddress":"0xdac17f958d2ee523a2206206994597c13d831ec7","amount":"100000000000000000","slippagePercent":"2.0","userWalletAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","swapReceiverAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","dexIds":"1,3"} Error: Insufficient liquidity
Failed to get swap data: GET /api/v6/dex/aggregator/swap {"chainIndex":1,"fromTokenAddress":"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE","toTokenAddress":"0xdac17f958d2ee523a2206206994597c13d831ec7","amount":"100000000000000000","slippagePercent":"2.0","userWalletAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","swapReceiverAddress":"0x88381a53b020ea92fb1b059e0ead49cd88be3318","dexIds":"1,3"} Error: Insufficient liquidity
‚ùå Uniswap: Insufficient liquidity

‚ö†Ô∏è  All amounts tested failed
Next steps:
1. Try even larger amounts (0.5 ETH+)
2. Try different token pairs (ETH ‚Üí DAI, WETH ‚Üí USDC)
3. Use a different DEX aggregator (1inch, ParaSwap)
